<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2015-05-27">

<title>On Craft – The OO-Ray</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-3b7f4aff7acac744aa1d596ce5db2ede.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-KSSKDNK101"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-KSSKDNK101', { 'anonymize_ip': true});
</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(../texture-bw.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">The OO-Ray</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">Bio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../music.html"> 
<span class="menu-text">Music</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../press.html"> 
<span class="menu-text">Press Info</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../shows.html"> 
<span class="menu-text">Showography</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../licensing.html"> 
<span class="menu-text">Licensing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../mailing.html"> 
<span class="menu-text">Mailing List</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">On Craft</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 27, 2015</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><em>The following is part of a sporadic essay series I am writing on <a href="../tags/survival-skills-for-artists/">survival skills for artists</a>. If you enjoy reading these, please share!</em></p>
<p>I think that most starting artists have an overly romantic view of craft. They buy into the cinematic notion that the conception and creation of an artistic work is a smooth process that proceeds like a feverish dream from the moment of inspiration in a single session. This makes for good film, but it’s really not how the majority of artistic pieces are made.</p>
<p>The truth is that good works of art take a lot of work. Much of that work is good old fashioned problem solving. Many of us think that once we have the idea or the inspiration, the work is nearly done. But real creative work is dealing with unanticipated issues. For example, in translating a sketch of an outfit to an actual piece of clothing, there are tons of unanticipated problems, such as how two pieces of cloth must come together to fit correctly on a real person. Musically, we may have two themes we want to work together, but finding the chords or connecting melodies to do this requires a lot of experimentation. Writing a good story or a novel requires problem solving in executing a plot correctly, finding actions that are true to the characters and their motivations that execute the plot. A good poem is like a machine, with no word out of place and each word contributing to the effect of the whole poem. Executing each of these art forms well requires creative problem solving.</p>
<p>I propose that you divide creating art into three distinct activities: 1) <em>capturing inspiration</em>, 2) <em>working/problem solving</em>, and 3) <em>editing</em>. The majority of your work will be working and editing. Note that working and editing must be distinct processes. When you work, you must be free and uninhibited; when you edit, you must be merciless in what you cut and what you include. If you do the two together, you will end up being creatively paralyzed.</p>
<p><strong>Capturing Inspiration</strong></p>
<p>First of all, toss that notion of working on a piece in a single feverish session away. You live in the real world, and barring having a wealthy sponsor, working like that is a luxury most of us don’t have. You need to be able to capture your inspiration when it comes, as it often does at inopportune moments, such as the shower, on a walk, or during work. Lots of tools exist for capturing these moments of inspiration, such as notepads, recording apps, and cameras. You should get over any feelings of awkwardness or self-consciousness when using them in public.</p>
<p>Your capture tools should be fast, simple, accessible, and adequate enough to capture your ideas accurately. Transfer your ideas to some sort of long-term storage. Store your ideas in a notebook, a file folder of hummed recordings on your desktop, or an photo album of beautiful pictures. The point is to be able to rapidly review ideas for follow up. Be sure to eventually act on your inspiration. Otherwise, those ideas lie fallow, much like rolls of exposed but undeveloped film. It’s wasted potential if you don’t act on your ideas, and your muse will be displeased. You may find your wellspring of ideas may dry up because you failed to act on them.</p>
<p>You may find it useful to dispose of ideas that have sat in long-term storage for too long. These unworked ideas can weigh you down creatively and should be let go. Occasionally revisiting and clearing out your backlog is essential to the creative process.</p>
<p><strong>The Work</strong></p>
<p>The next step is working, the creative problem solving. You act on that inspiration that you’ve captured, when you have the proper time to work at it. You must be willing to do the work. There are no shortcuts. You must learn what works and what doesn’t in the context of your piece. You must not be precious about the work. Working only when you are “inspired” is a specious notion. The most important thing is to start and maintain momentum. Studying theory (music theory, color theory) and art history can help you understand what solutions to similar problems others have used. But your solutions must be practical and personalized to your vision. Don’t be afraid of making mistakes. Digital tools give you the freedom to go back if we make a mistake. Make multiple versions if you are unsure.</p>
<p>Working is far from a linear process. I rarely work from the start of a piece to the end of it in a linear fashion. My own musical process tends to be to create tons of versions of a musical phrase and then figure out how to connect them together. I need to have a seed idea, which can be a tiny repeated sample or theme to work on. When I write, I often put all of my ideas on the page at once, using a mindmap. Seeing all the ideas on the page at once helps me discover the structure of the piece I write and allows for happy accidents to shape the piece.</p>
<p>You should work without feeling self conscious and critical. Save being critical for later when you have had the proper time to see the shape of the work. You can always go back and fix things later.</p>
<p>A note about those who improvise to produce their pieces. This is a unique process unto itself, and it’s easy to generate a lot of material using this process. If you have the improvisational skills, it’s relatively easy to hit record. Where I have seen many an improvisational musician fall down is in the editing stage. Due to the ephemeral nature of performance, what works live does not necessarily work in the recorded setting, where the listener can endlessly relisten to something (I find many live recordings to be tedious because of this). Selecting the moments of improv that work and stitching them together can be a difficult process, and it can take much longer than the actual improv. When Marcus Fischer and I put together <em>Tessellations</em>, the base of it was improvised, but then we had to mercilessly edit 20 minute sessions into coherent songs.</p>
<p><strong>Editing</strong></p>
<p>When you have done some work, then you are ready to edit. Make sure to separate editing from working, otherwise it will paralyze your working process. It is often good to give yourself some time between working and editing. You can edit the work with a fresh perspective and with less emotional attachment to ideas.</p>
<p>During editing, you must understand how each individual idea contributes to the piece as a whole. Be merciless and don’t get emotionally attached to any one idea. If an idea works, keep it; if not, save the idea in another file of other ideas to pursue later. If it’s a good idea, it will eventually find its place. If not, just know that the creative road to every standup routine, novel, and symphony is littered with lots of discarded ideas. Look at Beethoven’s drafts; he discarded huge sections of pieces from draft to draft, and crossed out whole pages the manuscript. I personally find it comforting that all artists struggle. The ones who say they don’t are probably lying.</p>
<p>The act of editing can be creatively cathartic in itself. Often, it’s only by discarding ideas that I can see the true shape of the work. Once you have a vision of the form your work is supposed to take, the process will become easier. You will become more sure of whether an idea belongs or not as you continue.</p>
<p>Oftentimes, the editing process generates new ideas, which may be useful to the work or external to the work. Be sure to capture these and use them in the next working phase.</p>
<p><strong>The Thick of It</strong></p>
<p>You will often iterate between working and editing. They take two different states of mind, so it is often useful to schedule a working period with one or the other in mind, based on your current mindset. When you’re in the thick of it, it can often seem like an endless process. Fight the feelings of inferiority that arise. Persist, and you’ll see it through.</p>
<p>Hopefully, through this process, you will discover the structure, or form, that suits your piece best. Do not dismiss finding the proper form; it’s the architecture and the scaffolding that you hang your ideas on. A good form can be the difference between someone being indifferent to your piece or making a deep and lasting connection. Think of a good pop song; it gets to the point and it does it in a structure that can still surprise us to the day. Presentation is important.</p>
<p>When is a piece done? When viewed externally, other artists’ work might seem to have an air of seeming inevitability to it. In interviews, these artists often play up this sense of inevitability, suggesting they are merely tools of fate. This is mostly hogwash. A work of art is really only finished in the mind of its audience. Mark Snow, in an interview with Kumail Naijani, remarked at the indifference Chris Carter and the TV executives had to the X-Files theme before the series aired; it was only after the show aired and the audience liked it that they acknowledged it as a masterpiece. One of my most used pieces, “Silhouettes”, was originally twice its length; it was only after I had to fit it into a time requirement that the “right” length emerged. My point is to realize that the endless tinkering has to end at some point.</p>
<p>However, you should feel good about the work for it to feel finished. If you don’t feel it’s done, then it probably isn’t. There will always be nagging doubts about your work; if you are worried, release your work in a safe forum, send it to artistic friends you trust first. It’s often great to get the perspective of an artist outside your field; they will talk about it in artistic language, but unhindered by the perspective of your field. Make sure to extend this courtesy to them when they ask for it as well.</p>
<p><strong>Having a Process to Creatively Enable You</strong></p>
<p>I realize that most of you at this point are probably dismissing me for taking the romance out of the creative process. These thoughts about process and craft are hard won after years of creatively floundering about. I realized that the way I worked was counter productive, and wasn’t any more fun. By separating working and editing, my process has become way more fun and less dramatic. Starting a work has become an exploration of possibilities rather than one burdened with unreasonable expectations. I give myself permission to utilize happy accidents and to abandon projects that don’t inspire me.</p>
<p>The point really is to start, not to regret that you never did any writing, composing, or painting late in life. Artists with staying power find that the work itself is incredibly rewarding; everything else is really icing on the cake.</p>
<p><strong>Resources</strong></p>
<p>This piece is the distillation of my own personal experience and observing the creative processes of others. As a corrective to the cinematic notion of craft, here are some good movies about the work involved in the creative process.</p>
<p><a href="http://m.imdb.com/title/tt3204392/">The Kingdom of Dreams and Madness</a> about Hayao Miyazaki and Studio Ghibli is a powerful meditation on a master of animation and how he works. I thought it especially interesting in light of how his studio has adapted to his process.</p>
<p><a href="http://m.imdb.com/title/tt0109508/">Crumb</a>, about the work of R. Crumb, was a big influence in getting me to understand how important working is to creativity.</p>
<p><a href="http://m.imdb.com/title/tt0424509/">Touch the Sound</a>, about deaf percussionist Evelyn Glennie, is a profound look at being inspired by the world and her creative process. There is a great moment in the movie where she and Fred Frith are banging on pipes in a warehouse where she is recording.</p>
<p><a href="http://m.imdb.com/title/tt0151568/">Topsy-Turvy</a> is a wonderful view of the amount of work it takes to mount a musical (Gilbert and Sullivan’s <em>Mikado</em>) from conception to the stage.</p>
<p><em>This essay is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license</a>. Please share freely, as long as you attribute me as its creator (Ted Laderas, ted@15people.net).</em></p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>